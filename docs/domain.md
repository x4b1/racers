# Domain

![graph](wms_graph.png)

## Aggregates

### Warehouses

The building were all the spaces and packages are.

### Spaces

Is the physical representation of where are going to place the packages.

### Groups

A set of rules to match packages

### Packages

The object to be delivered

### Retailers

Who sends the package. e.g.: El Corte Ingles or Amazon.

### Routes

The way that will follow a package to be delivered.

## Relations

### warehouse-spaces (one-many)

A space cannot exists outside of a warehouse, but in a warehouse can be many spaces.

Here the reference is hold by the space, as it is a strong relation.

### space-packages (0-many)

A spaces and a package can live without each other so the relation is weak.

Both can hold the relation but makes more sense the space to have the all the packages.

### space-groups (0-many)

A spaces and a group can live without each other so the relation is weak.

Both can hold the relation but makes more sense the group to have the all the spaces.

### groups-packages (many-many)

A group and a package can live without each other so the relation is weak.

Both can hold the relation but makes more sense the group to have the all the packages.

### route-packages (0-many)

A route and a package can live without each other so the relation is weak. A route can be in multiple packages.

Both can hold the relation but makes more sense the package to have the route.

### retailer-packages (0-many)

A retailer and a package can live without each other so the relation is weak. A retailer can be in multiple packages.

Both can hold the relation but makes more sense the package to have the retailer.

## Domain events

Events can only be generated by the domain, so that it's why we only export the `ConsumeEvents` function outside the domain. With this we prevent to generate events outside domain.

## Types

We have multiple types defined in the domain, not only entities or aggregates, also VOs. This has a reason, each type needs to take care of his own integrity.

e.g:
PackageName, on NewPackage name we validate that name is not empty. This allows us to have more meaning full validations on the domain, and also delegating the responsibilities of validations.

## References

- [what is an aggregate?](https://stackoverflow.com/a/1958722)
- [aggregates relations, entities or ids](https://enterprisecraftsmanship.com/posts/link-to-an-aggregate-reference-or-id)
- [primitive obsesion](https://enterprisecraftsmanship.com/posts/functional-c-primitive-obsession)
- [relationship](https://blog.sapiensworks.com/post/2016/08/24/DDD-Relationships)
- [bounded contexts](https://www.baeldung.com/java-modules-ddd-bounded-contexts)
